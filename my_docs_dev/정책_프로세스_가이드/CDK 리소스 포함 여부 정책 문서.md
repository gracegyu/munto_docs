# CDK 리소스 포함 여부 정책 문서

> 문서 목적: 본 문서는 AWS 인프라를 IaC(Infrastructure as Code) 방식으로 관리함에 있어, 어떤 리소스는 CDK로 포함하여 관리하고, 어떤 리소스는 수동으로 생성해도 무방한지를 구분하기 위한 정책을 정의합니다.

---

## 1. CDK로 반드시 관리해야 하는 리소스

아래 리소스는 **서비스 인프라의 핵심 구성 요소**로, 반드시 CDK로 정의하여 재현성, 추적성, 협업 효율을 확보해야 합니다.

| 리소스 유형  | 예시                                  | 비고                                  |
| ------------ | ------------------------------------- | ------------------------------------- |
| VPC 구성     | VPC, Subnet, Route Table, NAT Gateway | 네트워크 설계 일관성 확보 필요        |
| 보안 관련    | Security Group, IAM Role/Policy, KMS  | 보안 정책 통제 및 변경 이력 관리 필요 |
| 컴퓨팅       | EC2, ECS, Lambda                      | 운영/배포 자동화 대상                 |
| API          | API Gateway, ALB, CloudFront          | 배포와 연동되는 핵심 트래픽 경로      |
| 스토리지     | S3, EFS                               | 버전관리, 권한설정 필수               |
| 데이터베이스 | RDS, DynamoDB                         | 환경별 일관된 구성 필요               |
| 모니터링     | CloudWatch Alarms, Dashboard          | 모니터링 기준 재현성 확보             |
| 배포 인프라  | CodePipeline, CodeBuild               | 배포 프로세스 일체화 필요             |

---

## 2. 수동 관리 예외로 허용되는 리소스

다음 리소스는 운영 보조 도구 또는 일시적인 용도이며, 수동 생성 후 문서화로 관리해도 무방합니다.

| 리소스 유형          | 예시                                  | 수동 관리 조건                                           |
| -------------------- | ------------------------------------- | -------------------------------------------------------- |
| 운영 도구용 EC2      | SSM Port Forwarding용 EC2             | 필수 조건: 단일 인스턴스, 고정 IP 필요 없음, 재생성 용이 |
| 테스트용 임시 리소스 | 실험적 Lambda, 임시 S3 버킷           | 생성 시기 및 용도 Jira 기록 필수                         |
| 긴급 대응용 리소스   | 긴급한 리디렉션 대응용 Route53 레코드 | 일정 기간 후 삭제 또는 CDK 전환 검토                     |

---

## 3. 판단 기준 체크리스트

| 항목                               | 포함 시 CDK 관리 여부 판단 기준                 |
| ---------------------------------- | ----------------------------------------------- |
| **상시 운영 여부**                 | 항상 켜져 있고 서비스 흐름에 포함되는가? → 포함 |
| **환경별 재현 필요 여부**          | Dev/Test/Prod 간 동일 구성 필요한가? → 포함     |
| **보안 및 감사 대상 여부**         | IAM/KMS 등 변경 이력 관리 중요한가? → 포함      |
| **운영자가 수시 접근하는가**       | 운영 편의 목적인가? → 예외 가능                 |
| **삭제/재생성에 큰 부담이 없는가** | 일시적/보조용인가? → 예외 가능                  |

---

## 4. 예외 리소스 관리 원칙

- 모든 수동 생성 리소스는 반드시 **Jira 티켓 생성 후 사전 협의 및 기록**
- 삭제/재생성 절차, 용도, 접근 방법 등을 **Infra 운영 문서에 명시**
- 예외 리소스가 장기 운영되거나 중요성이 증가할 경우 **CDK 전환을 재검토**

---

## 5. 결론 및 운영 방침

AWS 인프라를 IaC로 관리하는 목적은 **재현성, 협업, 변경이력 추적, 보안 통제**입니다. 따라서 가능한 모든 리소스를 CDK로 관리하는 것을 원칙으로 하되, 예외 리소스는 정책에 근거하여 문서화하고, 철저한 협의와 사후 기록을 통해 관리 수준을 유지해야 합니다.
